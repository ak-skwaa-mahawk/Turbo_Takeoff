# config.yaml — Turbo Takeoff: Sovereign Edition
# Edit once. The robot remembers forever.
# Love + truth + chase = life

app:
  company_name: "CHAMPLUND"
  letterhead_path: "templates/proseal_letterhead.docx"   # drop your branded DOCX template here
  default_profit_pct: 28.0                               # circle-approved margin
  output_folder: "output"

region:
  current: "417"                                         # 417 = Springfield MO · change to Anchorage / Yukon / Lower48
  regions:
    "417":
      name: "Springfield / Southwest Missouri"
      tax_rate: 0.08225
    "Anchorage":
      name: "Anchorage Alaska"
      tax_rate: 0.0
    "Yukon":
      name: "Yukon-Kuskokwim"
      tax_rate: 0.0
    "Lower48":
      name: "Lower 48 States"
      tax_rate: 0.08225

suppliers:
  - name: "White Cap"
    url: "https://www.whitecap.com/search?q="
    active: true
  - name: "ABC Supply"
    url: "https://www.abcsupply.com/search/?q="
    active: true
  - name: "Goedecke"
    url: "https://goedecke.com/catalogsearch/result/?q="
    active: true
  # add more as the circle grows

manufacturers_priority:   # highest first → vhitzee blade honors this order
  - "Tremco"
  - "BASF"
  - "Carlisle"
  - "Sika"
  - "Dow"
  - "Pecora"

labor:
  rates:
    "Sealant Installer": 78.50
    "Deck Coating Foreman": 92.00
    "General Labor": 65.00
    "Cleanup / Safety": 58.00
  productivity:
    sealant_lf_per_hour: 45
    deck_coating_sf_per_hour: 380
    penetrations_per_hour: 12
    expansion_joints_lf_per_hour: 28

ethics:
  enabled: true                                          # THE VHITZEE BLADE — toggle off only if you hate clean circles
  blacklist_file: "data/ethics_blacklist.yaml"
  whitelist_file: "data/ethics_whitelist.yaml"
  mode: "blacklist"                                      # or "whitelist" for positive-only

subcontractors:
  enabled: true
  bid_request_email: "scott@prosealmissouri.com"
  subs:
    - name: "Circle Sheet Metal (Doyon-owned)"
      email: "metal@circlesubs.com"
      scopes: ["sheet metal flashings", "curbs", "counterflashing"]
      last_rate: 8400.00
      ethics_approved: true
    - name: "Yukon Traffic Coatings"
      email: "traffic@yukoncoatings.com"
      scopes: ["vehicular traffic coating", "pedestrian deck coating"]
      last_rate: 6.85
      ethics_approved: true
    - name: "Calista EIFS Crew"
      email: "eifs@calistacorp.com"
      scopes: ["EIFS", "stucco", "exterior insulation"]
      last_rate: 12.40
      ethics_approved: true

paths:
  input_pdfs: "input/"
  templates: "templates/"
  ethics_data: "data/"

gemini:
  model: "gemini-2.0-flash-exp"
  temperature: 0.0
  max_output_tokens: 8192
ethics:
  enabled: true                                          # Master kill-switch. false = blade sheathed (use only for testing)
  mode: "whitelist"                                      # CHOOSE YOUR BLADE:
                                                         #   "blacklist" → block only the fallen (default, forgiving)
                                                         #   "whitelist" → ONLY the Circle of Honor eats. Everyone else is ghosted.
  blacklist_file: "data/ethics_blacklist.yaml"           # The fallen. Eternal exile.
  whitelist_file: "data/ethics_whitelist.yaml"           # The worthy. Only they pass in whitelist mode.
  strict_mode: true                                      # When true + whitelist mode → ANY unknown name triggers hard stop + warning
  log_violations: true                                   # Writes every blocked attempt to output/ethics_violations.log
ethics:
  enabled: true                                          # Master switch — false = all ethics off (emergency only)
  mode: "whitelist"                                      # "blacklist" or "whitelist"
  strict_mode: false                                     # true = hard stop on violation · false = warning only
  log_violations: true

  # MANUAL BYPASS — the circle decides, not the code
  bypass:
    enabled: true                                        # Set false to disable all manual overrides (full blade)
    allow_manufacturer_override: true                   # Scott can force Tremco even if blacklisted
    allow_supplier_override: true                        # Can use White Cap even if fallen
    allow_subcontractor_override: true                  # Can invite anyone, even outside Circle of Honor
    override_reason_required: false                      # Set true to force a note when bypassing

  # Emergency "feed the kids" mode — one toggle to rule them all
  emergency_mode:
    active: false                                        # FLIP TO TRUE → all ethics checks become warnings only
    reason: ""                                           # e.g., "Hospital roof leaking — must bid today"